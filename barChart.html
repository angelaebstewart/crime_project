<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bar Chart</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="barChart.js"></script>
    <script src="getters.js"></script>

    <style>
        div {
            padding: 20px 0 0 10px;
        }
    </style>
</head>
<body>
    <div id="updatableChart"></div>
    <script>
        var updatableChart;
        createRadioButtons();

        function whenAvailable(name, callback) {
            var interval = 10; // ms
            window.setTimeout(function() {
                if (window[name]) {
                    callback(window[name]);
                } else {
                    window.setTimeout(arguments.callee, interval);
                }
            }, interval);
        }

        whenAvailable("countyData",function(){
          updatableChart = barChart().width(800).height(450).data(getRaceData(countyData,"16079")); //change width and height here
          d3.select('#updatableChart')
              .call(updatableChart);

          //example of get median incomes
          getCountiesMedianIncome(countyData,"AL");

        });

        function createRadioButtons() {
            var crimeTypes = ["Population", "Overall", "Violent", "Property",
                "Burglary", "Larceny-Theft", "Motor Vehicle Theft",
                "Murder & Nonnegligent Manslaughter", "Revised Rape",
                "Robbery", "Aggravated Assault"];
            var selected = 0;

            var form = d3.select("body").append("form");

            var labels = form.selectAll("span")
                .data(crimeTypes)
                .enter()
                .append("span");

            labels.append("input")
                .attr('type', 'radio')
                .attr('class', 'crime-toggles')
                .attr('name', 'crime')
                .attr('value', function(d, i) {return d;})
                .property("checked", function(d, i) {return i===selected;})
                .on('click', function () { radioOnClick(this.value);});

            labels.append("label").html(function(d) {return d + "<br/>";});
        }

        //Nate, add code for updating your chart here.
        function radioOnClick(toggle_val) {
            updatableChart.data(getSexData(allData, "16079")); //this is just in here as dummy data to show how to update the bar chart
        }



        //on double click in choropleth.js, zoomed

    </script>
</body>
</html>
